<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Pomelo
    </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta http-equiv="content-scripte-type" content="text/javascript" />
    <meta name="author" content="netease" />
    <meta name="version" content="1.0" />
    <meta name="keywords" content="pomelo" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <script src="js/lib/build/build.js" type="text/javascript"></script>
    <script type="text/javascript">
      require('boot');
    </script> 
    <script type="text/javascript">
      var pomelo = window.pomelo;
      var host = "127.0.0.1";
      var port = "3010";
      // window.location.hostname
      function gateConnect() {
      
      	  var route = 'gate.gateHandler.queryEntry';
		  pomelo.init({
			host: window.location.hostname,
			port: 3014,
			log: true
		  }, function() {
			pomelo.request(route, {
				uid: 'usr1'
			}, function(data) {
				pomelo.disconnect();
				if(data.code === 500) {
					showError(LOGIN_ERROR);
					return;
				}
		        console.log(data);
			});
		  });
	  
      }
      
      
      
      function show() {
        pomelo.init({
          host: host,
          port: port,
          log: true
        }, function() {
        pomelo.request("connector.entryHandler.entry", "hello pomelo", function(data) {
            console.log(data);
          });
        });
      }
      
      function loginA() {

        pomelo.request("connector.entryHandler.login", {
					usr: 'user1',
					pwd: 'pwd',
                    gid: 'crossword'
				}, function(data) {
            console.log(data);
          });

      }
      
      function loginB() {

        pomelo.request("connector.entryHandler.login", {
					usr: 'user2',
					pwd: 'pwd',
                    gid: 'crossword'
				}, function(data) {
            console.log(data);
          });

      }      
      
      function logout() {
      
        pomelo.request("connector.entryHandler.logout", {
			}, function(data) {
            console.log(data);
          });
      
      }
      
      function sitdownA() {

            pomelo.request("connector.entryHandler.enter", {
                        gid: 'crossword',
                        uuid: '24c9e15e52afc47c225b757e7bee1f9d',
                        usr: 'user1',
                        cid: {type:2,level:1}
                }, function(data) {
                console.log(data);
              });

      
      }

      function sitdownB() {

              pomelo.request("connector.entryHandler.enter", {
                  gid: 'crossword',
                  uuid: '7e58d63b60197ceb55a1c487989a3720',
                  usr: 'user2',
                  cid: {type:2,level:1}
              }, function(data) {
                  console.log(data);
              });


      }

      function sitdownR(uid) {

          pomelo.request("connector.entryHandler.enter", {
              gid: 'killer',
              uuid:uid,
              cid:'C0'
          }, function(data) {
              console.log(data);
          });

      }

      function ready() {

          pomelo.request("killer.gameHandler.ready", {ready:true}, function(data) {
              console.log(data);
//              alert(data.msg);
          });

      }

      function situp() {
      
        pomelo.request("connector.entryHandler.exit", {
        			sit: 1,
        			level: 0
			}, function(data) {
            console.log(data);
          });
      
      }

      function getInfo() {

          pomelo.request("connector.entryHandler.getinfo", {
                uid: 2
          }, function(data) {
              console.log(data);
          });

      }

      function pay() {

          pomelo.request("connector.entryHandler.pay", {
              usr: 'user1',
              pwd: 'pwd',
              val: 8
          }, function(data) {
              console.log(data);
          });

      }

      function use() {

          pomelo.request("crossword.gameHandler.use", {
              iid: 3
          }, function(data) {
              console.log(data);
          });

      }
      
      function send() {
      
        pomelo.request("crossword.gameHandler.send", {
                val: 1
			}, function(data) {
            console.log(data);
          });
      
      }

      function cursor(tid) {

          pomelo.request("killer.gameHandler.cursor", {tid:tid}, function(data) {
              console.log(data);
          });

      }

      function rooms() {

          pomelo.request("connector.entryHandler.list", {gid:'killer'}, function(data) {
              console.log(data);
//              alert(data.msg);
          });

      }
      
    console.log('js log ... ');
      
	//wait message from the server.
	pomelo.on('onUserChat', function(data) {
		console.log('onUserChat ... ');
        console.log(data);
//		addMessage(data.from, data.target, data.msg);
//		$("#chatHistory").show();
//		if(data.from !== username)
//			tip('message', data.from);
	});

	//update user list
	pomelo.on('onUserEnter', function(data) {
		console.log('onUserEnter ...');
		console.log(data);
//		var user = data.user;
//		tip('online', user);
//		addUser(user);
	});

      pomelo.on('onUserReady', function(data) {
          console.log('onUserReady ...');
          console.log(data);
      });

      pomelo.on('onUserCursor', function(data) {
          console.log('onUserCursor ...');
          console.log(data);
      });

      pomelo.on('onUserUpdate', function(data) {
          console.log('onUserUpdate ...');
          console.log(data);
      });

	//update user list
	pomelo.on('onUserExit', function(data) {
		console.log('onUserExit ... ');
        console.log(data);
//		var user = data.user;
//		tip('offline', user);
//		removeUser(user);
	});

      pomelo.on('onGameItem', function(data) {
          console.log('onGameItem ... ');
          console.log(data);
      });

    pomelo.on('onGameReady', function(data) {
        console.log('onGameReady ... ');
        console.log(data);
    });

      pomelo.on('onGameProc', function(data) {
          console.log('onGameProc ... ');
          console.log(data);
      });

	pomelo.on('onGameStart', function(data) {
		console.log('onGameStart ... ');
		console.log(data);		
//		var user = data.user;
//		tip('offline', user);
//		removeUser(user);
	});

      pomelo.on('onGameState', function(data) {
          console.log('onGameState ... ');
          console.log(data);
      });

      pomelo.on('onGameRound', function(data) {
          console.log('onGameRound ... ');
          console.log(data);
      });

      pomelo.on('onGameTime', function(data) {
          console.log('onGameTime ... ');
          console.log(data);
      });

	pomelo.on('onGameStop', function(data) {
		console.log('onGameStop ... ');
        console.log(data);
//		var user = data.user;
//		tip('offline', user);
//		removeUser(user);
	});


	//handle disconect message, occours when the client is disconnect with servers
	pomelo.on('disconnect', function(reason) {
		console.log('disconnect ... ');
//		showLogin();
	});
	      
      
    </script>
    

        
        
  </head>
  <body>
    <div class="g-doc">
      <div class="g-banner" style="border:none">
        <div class="logo">
          <div class="img"></div>
        </div>
      </div>
      <div class="g-background">
        <div class="g-content">
          Welcome to Pomelo
        </div>
      </div>
      <div class="g-link">
        Home:
        <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a>
      </div>
            <div class="g-button">
        	<input id="test" type="button" value="Test Gate Server" onclick="gateConnect()"/>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Test Game Server" onclick="show()"/>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Login A Game Server" onclick="loginA()"/>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Login B Game Server" onclick="loginB()"/>
      </div>
        <div class="g-button">
            <input id="test" type="button" value="GetInfo Game Server" onclick="getInfo()"/>
        </div>
      <div class="g-button">
        <input id="test" type="button" value="Sitdown A Game Server" onclick="sitdownA()"/>
      </div>
    <div class="g-button">
        <input id="test" type="button" value="Sitdown B Game Server" onclick="sitdownB()"/>
    </div>
        <div class="g-button">
            <input id="test" type="button" value="Sitdown R Game Server" onclick="sitdownR(Math.random())"/>
        </div>
        <div class="g-button">
            <input id="B2" type="button" value="Ready Game Server" onclick="ready()"/>
        </div>
        <div class="g-button">
        <input id="test" type="button" value="Situp Game Server" onclick="situp()"/>
      </div>     
      <div class="g-button">
        <input id="test" type="button" value="Logout Game Server" onclick="logout()"/>
      </div>                
      <div class="g-button">
        <input id="test" type="button" value="Send Game Server" onclick="send()"/>
      </div>

        <div class="g-button">
            <input id="test" type="button" value="Pay Game Server" onclick="pay()"/>
        </div>

        <div class="g-button">
            <input id="test" type="button" value="Use Game Server" onclick="use()"/>
        </div>
        <div class="g-button">
            <input id="C1" type="button" value="1" onclick="cursor(0)"/>
            <input id="C2" type="button" value="2" onclick="cursor(1)"/>
            <input id="C3" type="button" value="3" onclick="cursor(2)"/>
            <input id="C4" type="button" value="4" onclick="cursor(3)"/>
            <input id="C5" type="button" value="5" onclick="cursor(4)"/>
            <input id="C6" type="button" value="6" onclick="cursor(5)"/>
        </div>
        <div class="g-button">
            <input id="F1" type="button" value="List Game Server" onclick="rooms()"/>
        </div>

    </div>
    

    
  </body>
</html>
